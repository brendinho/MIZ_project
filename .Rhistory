Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity") +
geom_line(aes(y=avg), colour="blue") +
theme_bw() +
theme(
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
geom_rect(aes(xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf), fill="red", alpha=0.9) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity") +
geom_line(aes(y=avg), colour="blue") +
theme_bw() +
theme(
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.3) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity") +
geom_line(aes(y=avg), colour="blue") +
theme_bw() +
theme(
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.1) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
break_points <- sort(as.Date(c("2021-07-15", "2021-02-15", "2020-07-15")))
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity") +
geom_line(aes(y=avg), colour="blue") +
theme_bw() +
theme(
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.1) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity") +
geom_line(aes(y=avg), colour="blue") +
theme_bw() +
theme(
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.1) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="breen", alpha=0.1) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity") +
geom_line(aes(y=avg), colour="blue") +
theme_bw() +
theme(
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.1) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.1) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity") +
geom_line(aes(y=avg), colour="blue") +
theme_bw() +
theme(
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.1) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.1) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.1) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity") +
geom_line(aes(y=avg), colour="blue") +
theme_bw() +
theme(
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.05) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.05) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.05) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity") +
geom_line(aes(y=avg), colour="blue") +
theme_bw() +
theme(
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.07) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.07) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.07) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity", fill="black") +
geom_line(aes(y=avg), colour="blue", size=1) +
theme_bw() +
theme(
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.07) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.07) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.07) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity", fill="grey") +
geom_line(aes(y=avg), colour="blue", size=1) +
theme_bw() +
theme(
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.07) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.07) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.07) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity", fill="grey") +
geom_line(aes(y=avg), colour="blue", size=1) +
theme_bw() +
theme(
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%Y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.06) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.06) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.06) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
source('~/Documents/GitHub/MIZ_project/chloropleths.R', echo=TRUE)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity", fill="grey") +
geom_line(aes(y=avg), colour="blue", size=1) +
theme_bw() +
theme(
axis.text = element_text(size=13),
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%Y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.06) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.06) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.06) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity", fill="black") +
geom_line(aes(y=avg), colour="blue", size=1) +
theme_bw() +
theme(
axis.text = element_text(size=13),
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%Y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.04) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity", fill="grey") +
geom_line(aes(y=avg), colour="blue", size=1) +
theme_bw() +
theme(
axis.text = element_text(size=13),
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%Y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.02) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.02) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.02) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity", fill="grey") +
geom_line(aes(y=avg), colour="blue", size=1) +
theme_bw() +
theme(
axis.text = element_text(size=13),
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%Y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.03) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.03) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.03) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity", fill="grey70") +
geom_line(aes(y=avg), colour="blue", size=1) +
theme_bw() +
theme(
axis.text = element_text(size=13),
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%Y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.04) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity", fill="grey90") +
geom_line(aes(y=avg), colour="blue", size=1) +
theme_bw() +
theme(
axis.text = element_text(size=13),
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%Y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.04) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity", fill="grey10") +
geom_line(aes(y=avg), colour="blue", size=1) +
theme_bw() +
theme(
axis.text = element_text(size=13),
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%Y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.04) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity", fill="grey10") +
geom_line(aes(y=avg), colour="blue", size=1) +
theme_bw() +
theme(
axis.text = element_text(size=13),
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%Y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.04) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity", fill="grey30") +
geom_line(aes(y=avg), colour="blue", size=1) +
theme_bw() +
theme(
axis.text = element_text(size=13),
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%Y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.04) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves <- ggplot(
canada_temp, #  %>% dplyr::filter(!is.na(avg))
aes(date, cases)
) +
geom_bar(stat="identity", fill="grey30") +
geom_line(aes(y=avg), colour="blue", size=1) +
theme_bw() +
theme(
axis.text = element_text(size=13),
axis.text.x = element_text(angle=45, vjust=0.5)
) +
labs(x="Date", y="Cases") +
scale_x_date(date_breaks = "1 month" , date_labels = "%b-%Y", expand=c(0,0)) + # limits=c(min(canada_temp$date), max(canada_temp$date))
annotate(geom = "rect", xmin=min(canada_temp$date), xmax=break_points[1], ymin=-Inf, ymax=Inf, fill="red", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[1], xmax=break_points[2], ymin=-Inf, ymax=Inf, fill="green", alpha=0.04) +
annotate(geom = "rect", xmin=break_points[2], xmax=break_points[3], ymin=-Inf, ymax=Inf, fill="blue", alpha=0.04) +
geom_vline(xintercept=break_points[1], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[2], linetype="dashed", color = "red", size=0.5) +
geom_vline(xintercept=break_points[3], linetype="dashed", color = "red", size=0.5)
Canada_waves
sprintf("%s/Graphs/canada_waves.png", PROJECT_FOLDER)
ggsve(Canada_waves, sprintf("%s/Graphs/canada_waves.png", PROJECT_FOLDER))
ggsave(Canada_waves, sprintf("%s/Graphs/canada_waves.png", PROJECT_FOLDER), height=4, width=10)
ggsave(Canada_waves, file=sprintf("%s/Graphs/canada_waves.png", PROJECT_FOLDER), height=4, width=10)
ggarrange(SAC_distribution, SAC_map_with_census_info, labels=c("A","B"), ncol=1)
SAC_map_with_census_info <- ggplot(st_sf(Regions) %>% dplyr::mutate(class = fct_relevel(class, "CMA", "CA", "Strong", "Moderate", "Weak", "None", "Not given"))) +
geom_sf(data=All_Canada, fill="white") +
geom_sf(aes(fill = class), lwd = 0) +
scale_fill_brewer(type="div", palette="RdYlBu", name="Statistical Area Classification") +
# scale_fill_brewer(type="div", name="BrBG") +
theme_minimal() +
theme(
panel.grid = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.text = element_text(size=13),
legend.title = element_text(size=13),
legend.key.height= unit(1.5, 'cm')
) +
coord_sf(datum=NA) +
guides(colour = guide_legend(title.hjust=0.5))
SAC_map_with_census_info
SAC_map_with_census_info <- ggplot(st_sf(Regions) %>% dplyr::mutate(class = fct_relevel(class, "CMA", "CA", "Strong", "Moderate", "Weak", "None", "Not given"))) +
geom_sf(data=All_Canada, fill="white") +
geom_sf(aes(fill = class), lwd = 0) +
scale_fill_brewer(type="div", palette="RdYlBu", name="Statistical\nArea\nClassification") +
# scale_fill_brewer(type="div", name="BrBG") +
theme_minimal() +
theme(
panel.grid = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.text = element_text(size=13),
legend.title = element_text(size=13),
legend.key.height= unit(1.5, 'cm')
) +
coord_sf(datum=NA) +
guides(colour = guide_legend(title.hjust=0.5))
SAC_map_with_census_info
SAC_map_with_census_info <- ggplot(st_sf(Regions) %>% dplyr::mutate(class = fct_relevel(class, "CMA", "CA", "Strong", "Moderate", "Weak", "None", "Not given"))) +
geom_sf(data=All_Canada, fill="white") +
geom_sf(aes(fill = class), lwd = 0) +
scale_fill_brewer(type="div", palette="RdYlBu", name="Statistical\nArea\nClassification") +
# scale_fill_brewer(type="div", name="BrBG") +
theme_minimal() +
theme(
panel.grid = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.text = element_text(size=13),
legend.title = element_text(size=13),
legend.key.height= unit(1.5, 'cm')
) +
coord_sf(datum=NA) +
guides(colour = guide_legend(legend.title.align=0.5))
SAC_map_with_census_info
ggarrange(SAC_distribution, SAC_map_with_census_info, labels=c("A","B"), ncol=1, heights=c(1,5))
Figure_1 <- ggarrange(SAC_distribution, SAC_map_with_census_info, labels=c("A","B"), ncol=1, heights=c(1,5))
ggsave(Figure_1, file=sprintf("%s/Graphs/SAC_distribution_plots.png", PROJECT_FOLDER))
ggsave(Figure_1, file=sprintf("%s/Graphs/SAC_distribution_plots.pjpg", PROJECT_FOLDER))
ggsave(Figure_1, file=sprintf("%s/Graphs/SAC_distribution_plots.jpg", PROJECT_FOLDER))
# ggsave(Figure_1, file=sprintf("%s/Graphs/SAC_distribution_plots.jpg", PROJECT_FOLDER))
ggsave(SAC_map_with_census_info, file=sprintf("%s/Graphs/SAC_distribution_plots.jpg", PROJECT_FOLDER))
Figure_1 <- ggarrange(SAC_distribution, SAC_map_with_census_info, labels=c("A","B"), ncol=1, heights=c(3,5))
ggsave(Figure_1, file=sprintf("%s/Graphs/SAC_distribution_plots.jpg", PROJECT_FOLDER))
SAC_map_with_census_info <- ggplot(st_sf(Regions) %>% dplyr::mutate(class = fct_relevel(class, "CMA", "CA", "Strong", "Moderate", "Weak", "None", "Not given"))) +
geom_sf(data=All_Canada, fill="white") +
geom_sf(aes(fill = class), lwd = 0) +
scale_fill_brewer(type="div", palette="RdYlBu", name="Statistical\nArea\nClassification") +
# scale_fill_brewer(type="div", name="BrBG") +
theme_minimal() +
theme(
panel.grid = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank(),
legend.text = element_text(size=13),
legend.title = element_text(size=13),
legend.key.height = unit(1.5, 'cm'),
plot.background = element_rect(fill="white")
) +
coord_sf(datum=NA) +
guides(colour = guide_legend(legend.title.align=0.5))
Figure_1 <- ggarrange(SAC_distribution, SAC_map_with_census_info, labels=c("A","B"), ncol=1, heights=c(3,5))
ggsave(Figure_1, file=sprintf("%s/Graphs/SAC_distribution_plots.jpg", PROJECT_FOLDER))
?ggarrange
sprintf("convert %s/SAC_distribution_plots.jpg -trim %s/SAC_distribution_plots.jpg", PROJECT_FOLDER, PROJECT_FOLDER)
system(sprintf("convert %s/SAC_distribution_plots.jpg -trim %s/SAC_distribution_plots.jpg", PROJECT_FOLDER, PROJECT_FOLDER))
system(sprintf("convert %s/SAC_distribution_plots.jpg -trim %s/SAC_distribution_plots.jpg", PROJECT_FOLDER, PROJECT_FOLDER))
sprintf("%s/Graphs/SAC_distribution_plots.jpg", PROJECT_FOLDER)
sprintf("convert %s/SAC_distribution_plots.jpg -trim %s/SAC_distribution_plots.jpg", PROJECT_FOLDER, PROJECT_FOLDER)
system(sprintf("convert %s/Graphs/SAC_distribution_plots.jpg -trim %s/Graphs/SAC_distribution_plots.jpg", PROJECT_FOLDER, PROJECT_FOLDER))
sprintf("convert %s/Graphs/SAC_distribution_plots.jpg -trim %s/Graphs/SAC_distribution_plots.jpg", PROJECT_FOLDER, PROJECT_FOLDER)
)
